<!DOCTYPE html>
<html>

<head>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastr@2.1.4/build/toastr.min.css" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-treetable/3.2.0/css/jquery.treetable.min.css" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-treetable/3.2.0/css/jquery.treetable.theme.default.min.css" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha256-YLGeXaapI0/5IgZopewRJcFXomhRMlYYjugPLSyNjTY=" crossorigin="anonymous" />
	<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/toastr@2.1.4/toastr.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/jquery-treetable@3.2.0-1/jquery.treetable.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.bundle.min.js" integrity="sha256-fzFFyH01cBVPYzl16KT40wqjhgPtq6FFUB6ckN2+GGw=" crossorigin="anonymous"></script>
	<style>
		.cat-option-text {
			cursor: pointer;
			text-decoration: underline;
			color: blue;
		}
	</style>
</head>

<body>
	<div class="container-fluid">
		<div class="row mb-3">
			<div class="col">
				<div class="card">
					<div class="card-header">
						<a data-toggle="collapse" data-target="#demo">header ...</a>
					</div>
					<div id="demo" class="collapse show">
						<div class="card-body">
							content ...
						</div>
						<div class="card-footer">
							footer ...
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="row mb-3">
			<div class="col-3">
				<div class="card">
					<div class="card-header">
						header ...
					</div>
					<div class="card-body">
						content ...
					</div>
				</div>
			</div>

			<div class="col">
				<div class="card">
					<div class="card-header">
						header ...
					</div>
					<div class="card-body">

						<input type="hidden" name="SelectedInstance" value="">

						<div id="welcome_page" style="display:none">
							<h4>Instructions</h4>
							<p>... instructions ...</p>
							<p><a href="#" onclick="stage_1()">Start</a></p>
						</div>
						<div id="instance_head" style="display:none">
							<h3>Instance: <span id="the_instance"></span></h3>
						</div>
						<div id="selected_cat_display" style="color: gray; font-style: italic">
						</div>
						<div id="stage_1_head" style="display:none">
							<h4>Please select correct category for this instance.<br>(You can click on the category name
								for more
								information)</h4>
						</div>
						<div id="stage_2_head" style="display:none">
							<h4>Please select the most appropriate type for this instance.</h4>
						</div>

						<!-- Start java generated html -->
						<div id="cat_childset_ENTITY_0">
							<strong>Select a sub-category under ENTITY:</strong><br>
							<input type="radio" name="cat_radio_ENTITY_0" value="cat_ABSTRACT"> <span class="cat-option-text" id="cat_ABSTRACT">ABSTRACT</span><br>
							<input type="radio" name="cat_radio_ENTITY_0" value="cat_REAL"> <span class="cat-option-text" id="cat_REAL">REAL</span><br>
							<br><br>
						</div>
						<div id="cat_childset_ENTITY_1">
							<strong>Select a sub-category under ENTITY:</strong><br>
							<input type="radio" name="cat_radio_ENTITY_1" value="cat_INDIVIDUAL"> <span class="cat-option-text" id="cat_INDIVIDUAL">INDIVIDUAL</span><br>
							<input type="radio" name="cat_radio_ENTITY_1" value="cat_COLLECTIVE"> <span class="cat-option-text" id="cat_COLLECTIVE">COLLECTIVE</span><br>
							<br><br>
						</div>
						<div id="cat_ENTITY_dialog" style="display:none">
							<div id="cat_ENTITY_description">The root node</div>
							<div id="cat_ENTITY_examples">woman, law, football, sentence, forest, aircraft, tiger, nurse</div>
							<div id="cat_ENTITY_features">[{"feature_name":"inext","example":"bird (if the entity is \"robin\")","explain":"The extension of the word \"dog\" is the set of all (past, present and future) dogs in the world: e.g. Fido, Rover, Lassie, Rex, and so on."},{"feature_name":"haspart","example":"Trunk (an elephant has a trunk)","explain":"Has a part"},{"feature_name":"part_of","example":"Herd (an elephant is part of a herd)","explain":"Describes any collective the entity belongs to"},{"feature_name":"exp","example":"(love is experienced as) a warm fuzzy feeling in your heart","explain":"Experienced as ..."},{"feature_name":"prototype","example":"robin (if the category is)","explain":"The first example that comes to mind when thinking of this category"},{"feature_name":"source","example":"","explain":"Where does this entity come from?"},{"feature_name":"associated_with","example":"","explain":"Associated with"}]</div>
						</div>
						<div id="cat_childset_ABSTRACT_0">
							<strong>Select a sub-category under ABSTRACT:</strong> (<a href="#" onClick="backTo('ABSTRACT')">Deselect ABSTRACT</a>)<br>
							<input type="radio" name="cat_radio_ABSTRACT_0" value="cat_IDEAL"> <span class="cat-option-text" id="cat_IDEAL">IDEAL</span><br>
							<input type="radio" name="cat_radio_ABSTRACT_0" value="cat_PROPOSITIONAL"> <span class="cat-option-text" id="cat_PROPOSITIONAL">PROPOSITIONAL</span><br>
							<input type="radio" name="cat_radio_ABSTRACT_0" value="cat_QUANTITY"> <span class="cat-option-text" id="cat_QUANTITY">QUANTITY</span><br>
							<input type="radio" name="cat_radio_ABSTRACT_0" value="cat_IRREAL"> <span class="cat-option-text" id="cat_IRREAL">IRREAL</span><br>
							<input type="radio" name="cat_radio_ABSTRACT_0" value="cat_QUALITY"> <span class="cat-option-text" id="cat_QUALITY">QUALITY</span><br>
							<br><br>
						</div>
						<div id="cat_ABSTRACT_dialog" style="display:none">
							<div id="cat_ABSTRACT_description">Something that doesn't exist physically, nor is an event</div>
							<div id="cat_ABSTRACT_examples">law, sentence, safety, inch, justice, order</div>
							<div id="cat_ABSTRACT_features">[{"feature_name":"unknown","example":"","explain":"Placeholder for any features the user is unable to classify."}]</div>
						</div>
						<div id="cat_childset_REAL_0">
							<strong>Select a sub-category under REAL:</strong> (<a href="#" onClick="backTo('REAL')">Deselect REAL</a>)<br>
							<input type="radio" name="cat_radio_REAL_0" value="cat_PHYSICAL"> <span class="cat-option-text" id="cat_PHYSICAL">PHYSICAL</span><br>
							<input type="radio" name="cat_radio_REAL_0" value="cat_TEMPORAL"> <span class="cat-option-text" id="cat_TEMPORAL">TEMPORAL</span><br>
							<input type="radio" name="cat_radio_REAL_0" value="cat_SENTIENT"> <span class="cat-option-text" id="cat_SENTIENT">SENTIENT</span><br>
							<br><br>
						</div>
						<div id="cat_childset_REAL_1">
							<strong>Select a sub-category under REAL:</strong> (<a href="#" onClick="backTo('REAL')">Deselect REAL</a>)<br>
							<input type="radio" name="cat_radio_REAL_1" value="cat_NATURAL"> <span class="cat-option-text" id="cat_NATURAL">NATURAL</span><br>
							<input type="radio" name="cat_radio_REAL_1" value="cat_SOCIAL"> <span class="cat-option-text" id="cat_SOCIAL">SOCIAL</span><br>
							<br><br>
						</div>
						<div id="cat_REAL_dialog" style="display:none">
							<div id="cat_REAL_description">A real object or event.</div>
							<div id="cat_REAL_examples">woman, football, forest, aircraft, tiger, nurse, program</div>
							<div id="cat_REAL_features">[]</div>
						</div>
						<div id="cat_INDIVIDUAL_dialog" style="display:none">
							<div id="cat_INDIVIDUAL_description">An entity that occurs as a singular or is not compositional.</div>
							<div id="cat_INDIVIDUAL_examples">woman, football, cake, aircraft, tiger</div>
							<div id="cat_INDIVIDUAL_features">[]</div>
						</div>
						<div id="cat_IDEAL_dialog" style="display:none">
							<div id="cat_IDEAL_description">An abstract entity that represents a desired state. For example, 'order' in 'law and order' </div>
							<div id="cat_IDEAL_examples">law, justice, standard, peace, order</div>
							<div id="cat_IDEAL_features">[]</div>
						</div>
						<div id="cat_PROPOSITIONAL_dialog" style="display:none">
							<div id="cat_PROPOSITIONAL_description">A statement or an abstract component of speech- such as sentence</div>
							<div id="cat_PROPOSITIONAL_examples">discourse, sentence</div>
							<div id="cat_PROPOSITIONAL_features">[]</div>
						</div>
						<div id="cat_QUANTITY_dialog" style="display:none">
							<div id="cat_QUANTITY_description">An entity that can be either measured, is numerical or is related to measurement</div>
							<div id="cat_QUANTITY_examples">second, two, time, knowledge, metre</div>
							<div id="cat_QUANTITY_features">[]</div>
						</div>
						<div id="cat_IRREAL_dialog" style="display:none">
							<div id="cat_IRREAL_description">An entity that doesn't exist in the world/imaginary/mythological</div>
							<div id="cat_IRREAL_examples">unicorn, centaur</div>
							<div id="cat_IRREAL_features">[]</div>
						</div>
						<div id="cat_QUALITY_dialog" style="display:none">
							<div id="cat_QUALITY_description">An entity relating to an observed quality such as kindness</div>
							<div id="cat_QUALITY_examples">reliability, kindness, safety, airworthiness</div>
							<div id="cat_QUALITY_features">[]</div>
						</div>
						<div id="cat_childset_PHYSICAL_0">
							<strong>Select a sub-category under PHYSICAL:</strong> (<a href="#" onClick="backTo('PHYSICAL')">Deselect PHYSICAL</a>)<br>
							<input type="radio" name="cat_radio_PHYSICAL_0" value="cat_STATIONARY"> <span class="cat-option-text" id="cat_STATIONARY">STATIONARY</span><br>
							<input type="radio" name="cat_radio_PHYSICAL_0" value="cat_NONSTATIONARY"> <span class="cat-option-text" id="cat_NONSTATIONARY">NONSTATIONARY</span><br>
							<br><br>
						</div>
						<div id="cat_childset_PHYSICAL_1">
							<strong>Select a sub-category under PHYSICAL:</strong> (<a href="#" onClick="backTo('PHYSICAL')">Deselect PHYSICAL</a>)<br>
							<input type="radio" name="cat_radio_PHYSICAL_1" value="cat_LIVING"> <span class="cat-option-text" id="cat_LIVING">LIVING</span><br>
							<input type="radio" name="cat_radio_PHYSICAL_1" value="cat_NONLIVING"> <span class="cat-option-text" id="cat_NONLIVING">NONLIVING</span><br>
							<br><br>
						</div>
						<div id="cat_PHYSICAL_dialog" style="display:none">
							<div id="cat_PHYSICAL_description">A physical object</div>
							<div id="cat_PHYSICAL_examples">rock, automobile, football, engine, bird, diamond, gasoline</div>
							<div id="cat_PHYSICAL_features">[{"feature_name":"shape","example":"round","explain":"The general shape of an object (mostly geometrical shapes, but exceptions may exist)"},{"feature_name":"size","example":"house-sized","explain":"The size of an object (use vehicles or buildings for comparison (ex: elephant-\u003e big-\u003e truck sized)"},{"feature_name":"color","example":"red","explain":"The common color of an object"},{"feature_name":"material","example":"steel","explain":"The material property (steel, paper, fibers, biological tissue, etc)"},{"feature_name":"texture","example":"rough","explain":"The texture of an object (smooth, rough, etc)"},{"feature_name":"odor","example":"smelly","explain":"The common odor associated with object"},{"feature_name":"taste","example":"sweet","explain":"The common taste associated with object"},{"feature_name":"location","example":"Underwater","explain":"The common location of an object"},{"feature_name":"strength","example":"can lift a car","explain":"Strength of the object"},{"feature_name":"state","example":"plasma","explain":"The physical state of an object (gas, liquid, solid...)"}]</div>
						</div>
						<div id="cat_SENTIENT_dialog" style="display:none">
							<div id="cat_SENTIENT_description">A human type with specific traits and goals.</div>
							<div id="cat_SENTIENT_examples">woman, lawyer, secretary, clinic, Boeing, crowd, nurse</div>
							<div id="cat_SENTIENT_features">[{"feature_name":"internal_trait","example":"calculative","explain":"The distinctive trait of a particular sentient. For example, lawyers are commonly quick-thinking, etc"},{"feature_name":"goal","example":"score goals (for football strikers)","explain":"The goal of a sentient. For example, lawyers have the goal to win cases for clients."}]</div>
						</div>
						<div id="cat_NATURAL_dialog" style="display:none">
							<div id="cat_NATURAL_description">A naturally occuring entity (not created/developed by human)</div>
							<div id="cat_NATURAL_examples">woman, rock, heat, gold, bird, summer, diamond</div>
							<div id="cat_NATURAL_features">[]</div>
						</div>
						<div id="cat_SOCIAL_dialog" style="display:none">
							<div id="cat_SOCIAL_description">An entity created by humans or arising from society.</div>
							<div id="cat_SOCIAL_examples">laywer, secretary, clinic, marriage, engine, football</div>
							<div id="cat_SOCIAL_features">[{"feature_name":"function","example":"open cans (for can-openers)","explain":"Either what an object is used for, or what a person/sentient does"},{"feature_name":"requirement","example":"batteries (for most electronic toys)","explain":"The prerequisites or required tools or objects to function"},{"feature_name":"processing","example":"","explain":"The manner in which a SOCIAL entity is processed/created/comes to be "}]</div>
						</div>
						<div id="cat_LIVING_dialog" style="display:none">
							<div id="cat_LIVING_description">A biologically living entity.</div>
							<div id="cat_LIVING_examples">tiger, amoeba, human, sunflower</div>
							<div id="cat_LIVING_features">[{"feature_name":"propagation","example":"live births","explain":"The source of a living object- example mammals are mainly through \u0027live births\u0027"},{"feature_name":"habitat","example":"Forests","explain":"Where the living entity is commonly found"},{"feature_name":"physiology","example":"Covered in scales and posessing fins.","explain":"What the living entity is composed of/body form "},{"feature_name":"age","example":"","explain":"The age of a living entity"}]</div>
						</div>
						<div id="cat_NONLIVING_dialog" style="display:none">
							<div id="cat_NONLIVING_description">A non-living entity.</div>
							<div id="cat_NONLIVING_examples">rock, oil, river, acid, toolbox, report</div>
							<div id="cat_NONLIVING_features">[{"feature_name":"Expiration_date","example":"12/2/2019","explain":"Describes a previously determined date after which something should no longer be used."}]</div>
						</div>
						<div id="cat_STATIONARY_dialog" style="display:none">
							<div id="cat_STATIONARY_description">Describes things that are normally immobile, attached to the earth and moved only at great effort.</div>
							<div id="cat_STATIONARY_examples">building, tree, mountain</div>
							<div id="cat_STATIONARY_features">[]</div>
						</div>
						<div id="cat_childset_NONSTATIONARY_0">
							<strong>Select a sub-category under NONSTATIONARY:</strong> (<a href="#" onClick="backTo('NONSTATIONARY')">Deselect NONSTATIONARY</a>)<br>
							<input type="radio" name="cat_radio_NONSTATIONARY_0" value="cat_SELFMOVING"> <span class="cat-option-text" id="cat_SELFMOVING">SELFMOVING</span><br>
							<input type="radio" name="cat_radio_NONSTATIONARY_0" value="cat_NONSELFMOVING"> <span class="cat-option-text" id="cat_NONSELFMOVING">NONSELFMOVING</span><br>
							<br><br>
						</div>
						<div id="cat_NONSTATIONARY_dialog" style="display:none">
							<div id="cat_NONSTATIONARY_description">Describes things that are able to move or be moved.</div>
							<div id="cat_NONSTATIONARY_examples"></div>
							<div id="cat_NONSTATIONARY_features">[]</div>
						</div>
						<div id="cat_SELFMOVING_dialog" style="display:none">
							<div id="cat_SELFMOVING_description">Describes things that are normally in motion or designed for motion, in some cases with no apparent initial source.</div>
							<div id="cat_SELFMOVING_examples">dog, truck</div>
							<div id="cat_SELFMOVING_features">[{"feature_name":"Energy_source","example":"Food","explain":"Describes the source of energy which enables the object to move on its own."}]</div>
						</div>
						<div id="cat_NONSELFMOVING_dialog" style="display:none">
							<div id="cat_NONSELFMOVING_description">Describes things that are normally immobile but can be moved with slight effort.</div>
							<div id="cat_NONSELFMOVING_examples">brick, rock</div>
							<div id="cat_NONSELFMOVING_features">[{"feature_name":"Cause_of_motion","example":"A ball is thrown","explain":"Describes the action(s) necessary for the object to be moved."}]</div>
						</div>
						<div id="cat_childset_COLLECTIVE_0">
							<strong>Select a sub-category under COLLECTIVE:</strong> (<a href="#" onClick="backTo('COLLECTIVE')">Deselect COLLECTIVE</a>)<br>
							<input type="radio" name="cat_radio_COLLECTIVE_0" value="cat_MASS"> <span class="cat-option-text" id="cat_MASS">MASS</span><br>
							<input type="radio" name="cat_radio_COLLECTIVE_0" value="cat_SET"> <span class="cat-option-text" id="cat_SET">SET</span><br>
							<input type="radio" name="cat_radio_COLLECTIVE_0" value="cat_STRUCTURE"> <span class="cat-option-text" id="cat_STRUCTURE">STRUCTURE</span><br>
							<br><br>
						</div>
						<div id="cat_COLLECTIVE_dialog" style="display:none">
							<div id="cat_COLLECTIVE_description">Describes a group of entities as a whole.</div>
							<div id="cat_COLLECTIVE_examples">dog, truck</div>
							<div id="cat_COLLECTIVE_features">[{"feature_name":"countability","example":"Countable","explain":"Explains if the collective entity is countable or not."}]</div>
						</div>
						<div id="cat_MASS_dialog" style="display:none">
							<div id="cat_MASS_description">Even the smallest amount is of the same material nature as the collective term (a drop of water is still water), and whose members are referred to only in terms of measurable units.</div>
							<div id="cat_MASS_examples">water, sand</div>
							<div id="cat_MASS_features">[{"feature_name":"Smallest_element_name","example":"grain","explain":"Describes the object in terms of the smallest amount of it."}]</div>
						</div>
						<div id="cat_SET_dialog" style="display:none">
							<div id="cat_SET_description">Each member of the set is the same kind as every other member.</div>
							<div id="cat_SET_examples">herd</div>
							<div id="cat_SET_features">[]</div>
						</div>
						<div id="cat_STRUCTURE_dialog" style="display:none">
							<div id="cat_STRUCTURE_description">Each member is of the same kind type as every other member; members have specified relations with one another.</div>
							<div id="cat_STRUCTURE_examples">company</div>
							<div id="cat_STRUCTURE_features">[{"feature_name":"hierarchy","example":"management,staff","explain":"describes the roles inside the structure"},{"feature_name":"roles","example":"managers are in charge of managing staff","explain":"explains the duty and responsibility of the role"}]</div>
						</div>
						<div id="cat_childset_TEMPORAL_0">
							<strong>Select a sub-category under TEMPORAL:</strong> (<a href="#" onClick="backTo('TEMPORAL')">Deselect TEMPORAL</a>)<br>
							<input type="radio" name="cat_radio_TEMPORAL_0" value="cat_RELATIONAL"> <span class="cat-option-text" id="cat_RELATIONAL">RELATIONAL</span><br>
							<input type="radio" name="cat_radio_TEMPORAL_0" value="cat_NONRELATIONAL"> <span class="cat-option-text" id="cat_NONRELATIONAL">NONRELATIONAL</span><br>
							<br><br>
						</div>
						<div id="cat_TEMPORAL_dialog" style="display:none">
							<div id="cat_TEMPORAL_description">There is a time aspect to the entity in question.</div>
							<div id="cat_TEMPORAL_examples">party, hurricane, winter</div>
							<div id="cat_TEMPORAL_features">[]</div>
						</div>
						<div id="cat_childset_RELATIONAL_0">
							<strong>Select a sub-category under RELATIONAL:</strong> (<a href="#" onClick="backTo('RELATIONAL')">Deselect RELATIONAL</a>)<br>
							<input type="radio" name="cat_radio_RELATIONAL_0" value="cat_EVENT"> <span class="cat-option-text" id="cat_EVENT">EVENT</span><br>
							<input type="radio" name="cat_radio_RELATIONAL_0" value="cat_STATIVE"> <span class="cat-option-text" id="cat_STATIVE">STATIVE</span><br>
							<br><br>
						</div>
						<div id="cat_childset_RELATIONAL_1">
							<strong>Select a sub-category under RELATIONAL:</strong> (<a href="#" onClick="backTo('RELATIONAL')">Deselect RELATIONAL</a>)<br>
							<input type="radio" name="cat_radio_RELATIONAL_1" value="cat_MENTAL"> <span class="cat-option-text" id="cat_MENTAL">MENTAL</span><br>
							<input type="radio" name="cat_radio_RELATIONAL_1" value="cat_EMOTIONAL"> <span class="cat-option-text" id="cat_EMOTIONAL">EMOTIONAL</span><br>
							<input type="radio" name="cat_radio_RELATIONAL_1" value="cat_NONMENTAL"> <span class="cat-option-text" id="cat_NONMENTAL">NONMENTAL</span><br>
							<br><br>
						</div>
						<div id="cat_RELATIONAL_dialog" style="display:none">
							<div id="cat_RELATIONAL_description">Verbs are attached here.</div>
							<div id="cat_RELATIONAL_examples"></div>
							<div id="cat_RELATIONAL_features">[{"feature_name":"time","example":"2100 hours","explain":"describes when it happened."},{"feature_name":"cause","example":"The man fell down because he tripped on a rock","explain":"describes the cause of the event"},{"feature_name":"enablement","example":"The forest fires were caused by dense underbrush","explain":"describes what allowed an event to happen"},{"feature_name":"consequence","example":"Thus 1600 people perished in the fires","explain":"describes the consequences of the event"},{"feature_name":"sequel","example":"Subsequently more efforts were channeled into raising awareness for forest fires","explain":"describes subsequent events following the inital event"}]</div>
						</div>
						<div id="cat_NONRELATIONAL_dialog" style="display:none">
							<div id="cat_NONRELATIONAL_description">Temporal nouns (nouns that relate to time i.e, seasons) go here.</div>
							<div id="cat_NONRELATIONAL_examples">winter, afternoon</div>
							<div id="cat_NONRELATIONAL_features">[]</div>
						</div>
						<div id="cat_STATIVE_dialog" style="display:none">
							<div id="cat_STATIVE_description">Details verbs that often describe states that last for some time.</div>
							<div id="cat_STATIVE_examples">disagree, like, depend</div>
							<div id="cat_STATIVE_features">[]</div>
						</div>
						<div id="cat_MENTAL_dialog" style="display:none">
							<div id="cat_MENTAL_description">Mental Verbs refer to cognitive (that deals with logic) state in which actions are mostly abstract.</div>
							<div id="cat_MENTAL_examples">announce, schedule, prefer</div>
							<div id="cat_MENTAL_features">[]</div>
						</div>
						<div id="cat_EMOTIONAL_dialog" style="display:none">
							<div id="cat_EMOTIONAL_description">Describes verbs of emotional reaction:</div>
							<div id="cat_EMOTIONAL_examples">astonish, suprise</div>
							<div id="cat_EMOTIONAL_features">[]</div>
						</div>
						<div id="cat_NONMENTAL_dialog" style="display:none">
							<div id="cat_NONMENTAL_description">Verbs that describe an action go here</div>
							<div id="cat_NONMENTAL_examples">run, jump, dance</div>
							<div id="cat_NONMENTAL_features">[]</div>
						</div>
						<div id="cat_childset_EVENT_0">
							<strong>Select a sub-category under EVENT:</strong> (<a href="#" onClick="backTo('EVENT')">Deselect EVENT</a>)<br>
							<input type="radio" name="cat_radio_EVENT_0" value="cat_GOAL"> <span class="cat-option-text" id="cat_GOAL">GOAL</span><br>
							<input type="radio" name="cat_radio_EVENT_0" value="cat_NONGOAL"> <span class="cat-option-text" id="cat_NONGOAL">NONGOAL</span><br>
							<br><br>
						</div>
						<div id="cat_childset_EVENT_1">
							<strong>Select a sub-category under EVENT:</strong> (<a href="#" onClick="backTo('EVENT')">Deselect EVENT</a>)<br>
							<input type="radio" name="cat_radio_EVENT_1" value="cat_ACTIVITY"> <span class="cat-option-text" id="cat_ACTIVITY">ACTIVITY</span><br>
							<input type="radio" name="cat_radio_EVENT_1" value="cat_ACCOMPLISHMENT"> <span class="cat-option-text" id="cat_ACCOMPLISHMENT">ACCOMPLISHMENT</span><br>
							<input type="radio" name="cat_radio_EVENT_1" value="cat_ACHIEVEMENT"> <span class="cat-option-text" id="cat_ACHIEVEMENT">ACHIEVEMENT</span><br>
							<br><br>
						</div>
						<div id="cat_EVENT_dialog" style="display:none">
							<div id="cat_EVENT_description">A thing that happens or takes place, especially one of importance.</div>
							<div id="cat_EVENT_examples">party, graduation, earthquake</div>
							<div id="cat_EVENT_features">[{"feature_name":"manner","example":"It happened in a slow and uneventful manner","explain":"describes how the event unfolded."}]</div>
						</div>
						<div id="cat_GOAL_dialog" style="display:none">
							<div id="cat_GOAL_description">Describes goal-oriented events.</div>
							<div id="cat_GOAL_examples">purchase, study</div>
							<div id="cat_GOAL_features">[{"feature_name":"purpose","example":"The objective of studying is to get good grades","explain":"describes the objectives of goal-oriented actions."}]</div>
						</div>
						<div id="cat_NONGOAL_dialog" style="display:none">
							<div id="cat_NONGOAL_description">Describes events that occur either spontaneously or unintentionally, like an accident.</div>
							<div id="cat_NONGOAL_examples">accident, volcano eruption</div>
							<div id="cat_NONGOAL_features">[]</div>
						</div>
						<div id="cat_ACTIVITY_dialog" style="display:none">
							<div id="cat_ACTIVITY_description">ACTIVITY detail a process that does not entail a change of state (when going on a run you are running throughout the session) and can either end or culminate in an achievement or accomplishment.</div>
							<div id="cat_ACTIVITY_examples">think, run</div>
							<div id="cat_ACTIVITY_features">[]</div>
						</div>
						<div id="cat_ACCOMPLISHMENT_dialog" style="display:none">
							<div id="cat_ACCOMPLISHMENT_description">Accomplishments involve a change of state, often with a process involved (John drove to the store in an hour).</div>
							<div id="cat_ACCOMPLISHMENT_examples">John built a house, John finished building the house.</div>
							<div id="cat_ACCOMPLISHMENT_features">[]</div>
						</div>
						<div id="cat_ACHIEVEMENT_dialog" style="display:none">
							<div id="cat_ACHIEVEMENT_description">Details the change of state that took place but omits the process which caused the change of state.</div>
							<div id="cat_ACHIEVEMENT_examples">John reached the summit in an hour., Tom won the game</div>
							<div id="cat_ACHIEVEMENT_features">[]</div>
						</div>
						<!-- End java generated html -->

						<div id="kt_halfway" style="display:none">
							<h4>Is this instance belong to following type?</h4>
							<div>
								<strong>Type: <span id="h_kt_name"></span></strong><br>
								<span id="h_kt_desc"></span><br>
								<input type="radio" name="h_kt_radio" value="yes"> Yes<br>
								<input type="radio" name="h_kt_radio" value="no"> No<br>
								<br>
							</div>
						</div>

						<div id="kt_selection" style="display:none">
							<table id="kt_table">
								<caption>
									<a href="#"
										onclick="jQuery('#kt_table').treetable('expandAll'); return false;">Expand
										all</a>&emsp;
									<a href="#"
										onclick="jQuery('#kt_table').treetable('collapseAll'); return false;">Collapse
										all</a>
								</caption>
								<thead>
									<tr>
										<th nowrap>Type</th>
										<th>Description</th>
										<th>Sample Instances</th>
									</tr>
								</thead>
								<tbody id="kt_table_body">
								</tbody>
							</table>
							<input type="radio" name="radio_ktname" value="NOMATCH"> None of the above type.
							<p><a href="#" id="button1_to_stage3">Next</a></p>
						</div>

						<div id="kt_suggest" style="display:none">
							<h4>What type should this instance belongs to? (e.g. xyz)</h4>
							<input type="text" name="suggested_kt" />
							<div id="parent_kt_question" style="display:none">
								<h4>Which is the parent type of your newly suggested type?</h4>
								<table id="parent_kt_table">
									<caption>
										<a href="#"
											onclick="jQuery('#parent_kt_table').treetable('expandAll'); return false;">Expand
											all</a>&emsp;
										<a href="#"
											onclick="jQuery('#parent_kt_table').treetable('collapseAll'); return false;">Collapse
											all</a>
									</caption>
									<thead>
										<tr>
											<th nowrap>Type</th>
											<th>Description</th>
											<th>Sample Instances</th>
										</tr>
									</thead>
									<tbody id="parent_kt_table_body">
									</tbody>
								</table>
								<input type="radio" name="radio_parent_ktname" value="NONE"> None of the above is
								suitable as a parent
								type.
							</div>
							<p><a href="#" id="button2_to_stage3">Next</a></p>
						</div>

						<div id="feature_filling" style="display:none">
							<div id="feature_list_area"></div>
							<p><a href="#" id="button3_to_stage4">Next</a></p>
						</div>

					</div> <!-- card body end -->
				</div> <!-- card end -->
			</div> <!-- col end -->
		</div> <!-- row end -->

	</div> <!-- container end -->

	<!-- outside container because last step will hide all div -->
	<table id="feedback" style="width:100%" class="p-3">
		<tr><td>
		Feedback:
		<textarea name="feedback_content" style="width:100%" rows="4"></textarea>
		</td></tr>
	</table>

	<div id="last_box" style="display:none">
		<h3>Thanks you for your help!<br>You can click submit button to complete this task now.</h3>
		<crowd-button form-action="submit" variant="primary">Submit</crowd-button>
	</div>

	<script>
		const allKindTypes = [{ "type": "kind_type", "name": "INSTITUTION", "parents": ["COLLECTIVE", "ENTITY", "SENTIENT", "REAL", "SOCIAL"], "instances": ["organization", "company", "mro", "clinic", "aviation_1", "department"], "description": "An institution is a collective entity that works towards a goal, and is a byproduct/part of society. ", "children": ["COMPANY"], "feature_types": [{ "feature_name": "structure", "example": "", "explain": "" }] }, { "type": "kind_type", "name": "MAMMAL", "parents": ["VERTEBRATE", "ANIMAL", "INDIVIDUAL", "ENTITY", "SELFMOVING", "NONSTATIONARY", "PHYSICAL", "REAL", "LIVING", "NATURAL"], "instances": ["primate", "bovine"], "description": "A mammal is a vertebrate that generally is nourished with milk at young age, has hair on skin and is warm-blooded. For example, humans, bears, tiger.", "children": ["BOVINE", "PRIMATE"], "feature_types": [] }, { "type": "kind_type", "name": "PHYSICAL_QUALITY", "parents": ["INDIVIDUAL", "ENTITY", "QUALITY", "ABSTRACT"], "instances": ["reliability", "airworthiness", "safety"], "description": "This refers to abstract concepts in language that serve to convey the PHYSICAL quality of an object (such as it\u0027s reliability, effectiveness, etc)", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "IDEAL_GROUP", "parents": ["COLLECTIVE", "ENTITY", "IDEAL", "ABSTRACT"], "instances": ["law"], "description": "This refers to abstract concepts that denote a collective ideal scenario/setting. ", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "COMMUNICATIVE_EVENT", "parents": ["INDIVIDUAL", "ENTITY", "EVENT", "RELATIONAL", "TEMPORAL", "REAL", "NONMENTAL", "SOCIAL"], "instances": ["order_4", "instruction"], "description": "Refers to nouns denoting a communicative event between two entities.", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "DOMESTIC_VERTEBRATE", "parents": ["DOMESTIC_ANIMAL", "INDIVIDUAL", "ENTITY", "SELFMOVING", "NONSTATIONARY", "PHYSICAL", "REAL", "LIVING", "SOCIAL"], "instances": ["domestic_bird"], "description": "A domestic (one that is groomed in presence of sentients) vertebrate (an animal possessing a backbone/spine) such as fish, reptiles, mammals, birds and amphibians. ", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "PRODUCT", "parents": ["COLLECTIVE", "ENTITY", "SOCIAL", "REAL", "NONLIVING", "PHYSICAL"], "instances": [], "description": "...", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "PLANT", "parents": ["INDIVIDUAL", "ENTITY", "STATIONARY", "PHYSICAL", "REAL", "LIVING", "NATURAL"], "instances": ["tree"], "description": "A plant based entity", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "COGNITIVE_CONCEPTION", "parents": ["INDIVIDUAL", "ENTITY", "QUANTITY", "ABSTRACT"], "instances": ["understanding_1", "knowledge"], "description": "This refers to concepts that denote abstract cognitive phenomena that can be measured empirically", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "KITCHEN_TOOL", "parents": ["MANMADEOBJ", "INDIVIDUAL", "ENTITY", "NONSELFMOVING", "NONSTATIONARY", "PHYSICAL", "REAL", "NONLIVING", "SOCIAL"], "instances": ["knife"], "description": "A tool found/used in the kitchen or for it\u0027s related activities.", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "REGION", "parents": ["COLLECTIVE", "ENTITY", "STATIONARY", "PHYSICAL", "REAL", "NONLIVING", "NATURAL"], "instances": ["range"], "description": "Refers to a collective region spanning an area.", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "NATURAL_STATE_GROUP", "parents": ["COLLECTIVE", "ENTITY", "STATE", "RELATIONAL", "TEMPORAL", "REAL", "NONMENTAL", "NATURAL"], "instances": ["summer", "winter "], "description": "Refers to the natural states of the world that are thought of in a collective sense.", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "MANMADESYSTEM", "parents": ["INDIVIDUAL", "ENTITY", "NONSELFMOVING", "NONSTATIONARY", "PHYSICAL", "REAL", "NONLIVING", "SOCIAL"], "instances": ["system"], "description": "A manmade system comprising of multiple entities. It differs from an INSTITUTION since it is not SENTIENT.", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "DOMESTIC_ANIMAL", "parents": ["INDIVIDUAL", "ENTITY", "SELFMOVING", "NONSTATIONARY", "PHYSICAL", "REAL", "LIVING", "SOCIAL"], "instances": ["domestic_vertebrate", "steer"], "description": "Refers to domestic (brought up in the presence of sentients in a SOCIAL setting) animals ", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "HERD", "parents": ["COLLECTIVE", "ENTITY", "SELFMOVING", "NONSTATIONARY", "PHYSICAL", "REAL", "LIVING", "SOCIAL"], "instances": ["drove"], "description": "A herd refers to a large group of animals, and in this case, observed in a SOCIAL setting.", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "WORK", "parents": ["INDIVIDUAL", "ENTITY", "EVENT", "RELATIONAL", "TEMPORAL", "REAL", "SOCIAL"], "instances": [], "description": "Refers to concepts related to the activity of working in a SOCIAL setting.", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "DOMESTIC_BIRD", "parents": ["DOMESTIC_VERTEBRATE", "DOMESTIC_ANIMAL", "INDIVIDUAL", "ENTITY", "SELFMOVING", "NONSTATIONARY", "PHYSICAL", "REAL", "LIVING", "SOCIAL"], "instances": ["chicken"], "description": " Refers to a domestic (brought up in the presence of sentients in a SOCIAL setting) bird. ", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "EMOTIONAL_STATE", "parents": ["INDIVIDUAL", "ENTITY", "STATE", "RELATIONAL", "TEMPORAL", "REAL", "EMOTIONAL", "SOCIAL"], "instances": ["love", "condition_2"], "description": "Refers to an emotional state.....", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "IDEAL_THING", "parents": ["INDIVIDUAL", "ENTITY", "IDEAL", "ABSTRACT"], "instances": ["order_1", "requirement", "standard", "justice"], "description": "Refers to concepts denoting ideal individual states/setting.", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "COLLECTION", "parents": ["COLLECTIVE", "ENTITY", "NONSELFMOVING", "NONSTATIONARY", "PHYSICAL", "REAL", "NONLIVING", "SOCIAL"], "instances": ["assemblage"], "description": "A nonliving, nonselfmoving, social collection of objects.", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "NUMERICAL", "parents": ["INDIVIDUAL", "ENTITY", "QUANTITY", "ABSTRACT"], "instances": ["one", "pi"], "description": "An entity denoting a numerical/mathematical value.", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "SOCIAL_PEOPLE_GROUP", "parents": ["COLLECTIVE", "ENTITY", "SENTIENT", "REAL", "SOCIAL"], "instances": ["staff"], "description": "A group comprising of social sentients that have a goal.", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "DOCUMENT", "parents": ["MANMADEOBJ", "INDIVIDUAL", "ENTITY", "NONSELFMOVING", "NONSTATIONARY", "PHYSICAL", "REAL", "NONLIVING", "SOCIAL"], "instances": ["pdf", "report"], "description": "Refers to physical or virtual documents that have a purpose and other attributes.", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "COMPLEX", "parents": ["COLLECTIVE", "ENTITY", "STATIONARY", "PHYSICAL", "REAL", "NONLIVING", "SOCIAL"], "instances": ["shopping mall"], "description": "A social complex/system/structure composing of individual entities.", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "DISCOURSE", "parents": ["COLLECTIVE", "ENTITY", "PROPOSITIONAL", "ABSTRACT"], "instances": ["discourse"], "description": "Involves concepts relating to communication", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "GOAL_ORIENTED_ACTIVITY", "parents": ["COLLECTIVE", "ENTITY", "GOAL", "EVENT", "RELATIONAL", "TEMPORAL", "REAL", "ACTIVITY", "NONMENTAL", "SOCIAL"], "instances": ["plan", "strategy", "program"], "description": "Refers to social goal oriented activities.", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "FLORA", "parents": ["COLLECTIVE", "ENTITY", "STATIONARY", "PHYSICAL", "REAL", "LIVING", "NATURAL"], "instances": ["forest"], "description": "Relating to a group of plant like entities.", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "ACT_OF_GOD", "parents": ["INDIVIDUAL", "ENTITY", "EVENT", "RELATIONAL", "TEMPORAL", "REAL", "NONMENTAL", "NATURAL"], "instances": ["hurricane", "earthquake"], "description": "Refers to natural nonmental event based nouns.", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "MUTUAL_STATE", "parents": ["INDIVIDUAL", "ENTITY", "STATE", "RELATIONAL", "TEMPORAL", "REAL", "MENTAL", "SOCIAL"], "instances": ["understanding_2", "agreement", "order_3", "disagreement"], "description": "Refers to concepts denoting a mutual state between two entities- mostly sentients.", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "PEOPLE_EVENT", "parents": ["INDIVIDUAL", "ENTITY", "EVENT", "RELATIONAL", "TEMPORAL", "REAL", "NONMENTAL", "SOCIAL"], "instances": ["meeting", "party"], "description": "Refers to social events involving people/sentients.", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "ROLE", "parents": ["INDIVIDUAL", "ENTITY", "SENTIENT", "REAL", "SOCIAL"], "instances": ["secretary", "nurse"], "description": "Refers to a specific SOCIAL role", "children": [], "feature_types": [{ "feature_name": "relation_income", "example": "", "explain": "" }] }, { "type": "kind_type", "name": "MINERAL", "parents": ["INDIVIDUAL", "ENTITY", "NONSELFMOVING", "NONSTATIONARY", "PHYSICAL", "REAL", "NONLIVING", "NATURAL"], "instances": ["rock"], "description": "Refers to naturally occuring minerals.", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "FLEET", "parents": ["COLLECTIVE", "ENTITY", "SELFMOVING", "NONSTATIONARY", "PHYSICAL", "REAL", "NONLIVING", "SOCIAL"], "instances": ["armada"], "description": "Refers to a collection of social objects. ", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "NATURAL_PLACE", "parents": ["INDIVIDUAL", "ENTITY", "STATIONARY", "PHYSICAL", "REAL", "NONLIVING", "NATURAL"], "instances": ["mountain"], "description": "Refers to a natural place in this universe", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "PERSON", "parents": ["INDIVIDUAL", "ENTITY", "SENTIENT", "REAL", "NATURAL"], "instances": ["woman", "man"], "description": "Refers to a human being/person evoking SENTIENT attributes in contrast to the KT Human (which represents more PHYSICAL attributes)", "children": [], "feature_types": [{ "feature_name": "relation", "example": "", "explain": "" }, { "feature_name": "status", "example": "", "explain": "" }, { "feature_name": "name", "example": "", "explain": "" }] }, { "type": "kind_type", "name": "MEASURE", "parents": ["INDIVIDUAL", "ENTITY", "QUANTITY", "ABSTRACT"], "instances": ["second", "inch"], "description": "Refers to entities denoting the units of measurement of other entities.", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "DOMESTIC_PLANT", "parents": ["INDIVIDUAL", "ENTITY", "STATIONARY", "PHYSICAL", "REAL", "LIVING", "SOCIAL"], "instances": ["wheat"], "description": "Refers to a domestic (grows in presence of sentients in a social setting) plant based entity.", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "CROP", "parents": ["COLLECTIVE", "ENTITY", "STATIONARY", "PHYSICAL", "REAL", "LIVING", "SOCIAL"], "instances": ["wheat"], "description": "Refers to a domestic (grows in presence of sentients in a social setting) plant based entity.", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "HUMAN", "parents": ["PRIMATE", "MAMMAL", "VERTEBRATE", "ANIMAL", "INDIVIDUAL", "ENTITY", "SELFMOVING", "NONSTATIONARY", "PHYSICAL", "REAL", "LIVING", "NATURAL"], "instances": ["John"], "description": "Refers to a human being in relation to its PHYSICAL attributes as opposed to the kind type PERSON (which refers to the more SENTIENT attributes)", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "HISTORICAL_EPOCH", "parents": ["COLLECTIVE", "ENTITY", "EVENT", "RELATIONAL", "TEMPORAL", "REAL", "MENTAL", "SOCIAL"], "instances": ["renaissance"], "description": "Refers to a span of time in which certain SOCIAL activities/development took place.", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "PRIMATE", "parents": ["MAMMAL", "VERTEBRATE", "ANIMAL", "INDIVIDUAL", "ENTITY", "SELFMOVING", "NONSTATIONARY", "PHYSICAL", "REAL", "LIVING", "NATURAL"], "instances": ["human"], "description": "Refers to a specific type of mammal relating to monkeys, apes, humans, etc", "children": ["HUMAN"], "feature_types": [] }, { "type": "kind_type", "name": "COMPANY", "parents": ["INSTITUTION", "COLLECTIVE", "ENTITY", "SENTIENT", "REAL", "SOCIAL"], "instances": ["Boeing"], "description": "A specific INSTITUTION that operates in society and works towards a goal.", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "PART", "parents": ["INDIVIDUAL", "ENTITY", "PHYSICAL", "REAL"], "instances": ["bottom", "top", "part", "base_2"], "description": "Refers to general physical parts (both NATURAL and SOCIAL)", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "ANIMAL", "parents": ["INDIVIDUAL", "ENTITY", "SELFMOVING", "NONSTATIONARY", "PHYSICAL", "REAL", "LIVING", "NATURAL"], "instances": ["vertebrate", "elephant"], "description": "Refers to a general ANIMAL (specializes into various types of ANIMALS).", "children": ["VERTEBRATE"], "feature_types": [{ "feature_name": "sex", "example": "", "explain": "" }, { "feature_name": "behaviour", "example": "", "explain": "" }] }, { "type": "kind_type", "name": "SOCIAL_STATE_GROUP", "parents": ["COLLECTIVE", "ENTITY", "SOCIAL", "REAL", "STATE", "RELATIONAL", "TEMPORAL"], "instances": ["marriage"], "description": "...", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "CULTURE", "parents": ["INDIVIDUAL", "ENTITY", "NONSELFMOVING", "NONSTATIONARY", "PHYSICAL", "REAL", "LIVING", "SOCIAL"], "instances": ["e. coli"], "description": "A microbial culture, is a method of multiplying microbial organisms by letting them reproduce in predetermined culture medium under controlled laboratory conditions.", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "NATURAL_PROCESS", "parents": ["INDIVIDUAL", "ENTITY", "GOAL", "EVENT", "RELATIONAL", "TEMPORAL", "REAL", "ACTIVITY", "NONMENTAL", "NATURAL"], "instances": ["life_2", "process_2"], "description": "A process existing in or produced by nature (rather than by the intent of human beings).", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "STUFF", "parents": ["COLLECTIVE", "ENTITY", "NONSELFMOVING", "NONSTATIONARY", "PHYSICAL", "REAL", "NONLIVING", "NATURAL"], "instances": ["gold"], "description": "An unspecified material substance or aggregate of matter.", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "LOWER_ORDER_GROUP", "parents": ["COLLECTIVE", "ENTITY", "NONSELFMOVING", "NONSTATIONARY", "PHYSICAL", "REAL", "LIVING", "NATURAL"], "instances": ["mold"], "description": "Refers to a species of lower lifeforms that do not move on their own such as plants or fungi", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "CHEMICAL", "parents": ["INDIVIDUAL", "ENTITY", "NONSELFMOVING", "NONSTATIONARY", "PHYSICAL", "REAL", "NONLIVING"], "instances": ["base_3", "oil", "acid"], "description": "Any basic substance that is used in or produced by a reaction involving changes to atoms or molecules.", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "BIRD", "parents": ["VERTEBRATE", "ANIMAL", "INDIVIDUAL", "ENTITY", "SELFMOVING", "NONSTATIONARY", "PHYSICAL", "REAL", "LIVING", "NATURAL"], "instances": ["sparrow"], "description": "Any animal which has wings, has a beak, is covered in feathers and lays eggs.", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "BOVINE", "parents": ["MAMMAL", "VERTEBRATE", "ANIMAL", "INDIVIDUAL", "ENTITY", "SELFMOVING", "NONSTATIONARY", "PHYSICAL", "REAL", "LIVING", "NATURAL"], "instances": ["moose"], "description": "Any of a subfamily of bovids including oxen, bison and their close relatives.", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "MANMADEPART", "parents": ["INDIVIDUAL", "ENTITY", "NONSELFMOVING", "NONSTATIONARY", "PHYSICAL", "REAL", "NONLIVING", "SOCIAL"], "instances": ["engine", "component"], "description": "Refers to components of any man-made machines.", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "VERTEBRATE", "parents": ["ANIMAL", "INDIVIDUAL", "ENTITY", "SELFMOVING", "NONSTATIONARY", "PHYSICAL", "REAL", "LIVING", "NATURAL"], "instances": ["bird", "fish"], "description": "Any type of animal which possesses a backbone.", "children": ["BIRD", "FISH", "MAMMAL"], "feature_types": [] }, { "type": "kind_type", "name": "FLOW_GROUP", "parents": ["COLLECTIVE", "ENTITY", "SELFMOVING", "NONSTATIONARY", "PHYSICAL", "REAL", "NONLIVING", "NATURAL"], "instances": ["river_system"], "description": "Refers to the collective form of entities which flow.", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "MANMADEOBJ", "parents": ["INDIVIDUAL", "ENTITY", "NONSELFMOVING", "NONSTATIONARY", "PHYSICAL", "REAL", "NONLIVING", "SOCIAL"], "instances": ["document", "fuel", "kitchen_tool"], "description": "Describes anything (whole object, not just components) made by man.", "children": ["KITCHEN_TOOL", "FUEL", "DOCUMENT"], "feature_types": [] }, { "type": "kind_type", "name": "FISH", "parents": ["VERTEBRATE", "ANIMAL", "INDIVIDUAL", "ENTITY", "SELFMOVING", "NONSTATIONARY", "PHYSICAL", "REAL", "LIVING", "NATURAL"], "instances": ["trout"], "description": "Fish refer to any animals with gills and fins.", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "NATURALSYSTEM", "parents": ["INDIVIDUAL", "ENTITY", "NONSELFMOVING", "NONSTATIONARY", "PHYSICAL", "REAL", "NATURAL"], "instances": ["ecology"], "description": "A biological classification based upon morphological and anatomical relationships and affinities considered in the light of phylogeny and embryology.", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "task", "parents": ["SOCIAL_PROCESS", "INDIVIDUAL", "ENTITY", "GOAL", "EVENT", "RELATIONAL", "TEMPORAL", "REAL", "ACTIVITY", "NONMENTAL", "SOCIAL"], "instances": ["Household chores"], "description": "A usually assigned piece of work often to be finished within a certain period of time.", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "MOVING_OBJECT", "parents": ["INDIVIDUAL", "ENTITY", "SELFMOVING", "NONSTATIONARY", "PHYSICAL", "REAL", "NONLIVING", "SOCIAL"], "instances": ["football"], "description": "Any object that moves.", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "FLOW", "parents": ["INDIVIDUAL", "ENTITY", "SELFMOVING", "NONSTATIONARY", "PHYSICAL", "REAL", "NONLIVING", "NATURAL"], "instances": ["river"], "description": "Describes a steady, continuous stream or supply of something.", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "LOWER_ORDER", "parents": ["INDIVIDUAL", "ENTITY", "NONSELFMOVING", "NONSTATIONARY", "PHYSICAL", "REAL", "LIVING", "NATURAL"], "instances": ["spore"], "description": "...", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "POST_GOAL_EVENT_RESULT", "parents": ["INDIVIDUAL", "ENTITY", "STATE", "RELATIONAL", "TEMPORAL", "REAL", "MENTAL", "SOCIAL"], "instances": ["failure", "success"], "description": "Describes the outcome of an event.", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "maintenance", "parents": ["SOCIAL_PROCESS", "INDIVIDUAL", "ENTITY", "GOAL", "EVENT", "RELATIONAL", "TEMPORAL", "REAL", "ACTIVITY", "NONMENTAL", "SOCIAL"], "instances": ["rcm"], "description": "Maintenence refers to the process of preserving a condition or situation or the state of being preserved.", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "IRREAL_GROUP", "parents": ["COLLECTIVE", "ENTITY", "IRREAL", "ABSTRACT"], "instances": ["host"], "description": "An organization that holds an event to which others are invited.", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "PERSONALITY", "parents": ["INDIVIDUAL", "ENTITY", "QUALITY", "ABSTRACT"], "instances": ["kindness"], "description": "Personality refers to individual differences in characteristic patterns of thinking, feeling and behaving. ", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "PHYSICAL_STATE", "parents": ["INDIVIDUAL", "ENTITY", "STATE", "RELATIONAL", "TEMPORAL", "REAL", "NONMENTAL", "SOCIAL"], "instances": ["condition_1"], "description": "...", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "SOCIAL_PROCESS", "parents": ["INDIVIDUAL", "ENTITY", "GOAL", "EVENT", "RELATIONAL", "TEMPORAL", "REAL", "ACTIVITY", "NONMENTAL", "SOCIAL"], "instances": ["process_1", "task", "maintenance", "replacement", "service", "repair", "inspection", "ransportation", "check", "engineering"], "description": "A process that often involves human effort", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "NATURALPART", "parents": ["INDIVIDUAL", "ENTITY", "NONSELFMOVING", "NONSTATIONARY", "PHYSICAL", "REAL", "NATURAL"], "instances": ["hand"], "description": "A part of an individual entity that occurs naturally.", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "BODY", "parents": ["COLLECTIVE", "ENTITY", "SENTIENT", "REAL", "NATURAL"], "instances": ["crowd", "mob"], "description": "A collection of people", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "AREA", "parents": ["COLLECTIVE", "ENTITY", "NONLIVING", "PHYSICAL", "REAL", "STATIONARY"], "instances": [], "description": "...", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "CULTURE_GROUP", "parents": ["COLLECTIVE", "ENTITY", "NONSELFMOVING", "NONSTATIONARY", "PHYSICAL", "REAL", "LIVING", "SOCIAL"], "instances": ["pencillin"], "description": "Defines a group of biological cultures", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "SOCIAL_EVENT", "parents": ["INDIVIDUAL", "ENTITY", "EVENT", "RELATIONAL", "TEMPORAL", "REAL", "NONMENTAL", "SOCIAL"], "instances": ["release"], "description": "...", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "FAUNA", "parents": ["COLLECTIVE", "ENTITY", "SELFMOVING", "NONSTATIONARY", "PHYSICAL", "REAL", "LIVING", "NATURAL"], "instances": ["pod"], "description": "The animals of a particular region, habitat or geological period.", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "EQUIPMENT", "parents": ["COLLECTIVE", "ENTITY", "STATIONARY", "PHYSICAL", "REAL", "NONLIVING", "SOCIAL"], "instances": ["toolbox"], "description": "The set of necessary tools, clothing, etc. for a particular purpose.", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "UBIQUITOUS_ABSTRACT_CONCEPTION", "parents": ["INDIVIDUAL", "ENTITY", "QUANTITY", "ABSTRACT"], "instances": ["risk_1", "length", "value", "order_2", "time", "life_1"], "description": "Refers to intangible everyday phenomena that cannot be felt using the five senses", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "AIR_VEHICLE", "parents": ["VEHICLE", "INDIVIDUAL", "ENTITY", "SELFMOVING", "NONSTATIONARY", "PHYSICAL", "REAL", "NONLIVING", "SOCIAL"], "instances": ["aircraft"], "description": "Refers to a machine that is able to fly by gaining support form the air.", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "ARTIFACT", "parents": ["INDIVIDUAL", "ENTITY", "NONLIVING", "PHYSICAL", "REAL", "SOCIAL"], "instances": ["machine??", "knife", "pickup", "house"], "description": "Refers to any constructs which are made by humans.", "children": [], "feature_types": [{ "feature_name": "operation", "example": "A pencil  performs its function of writing by gripping the pencil shaft, placing the lead on the paper and moving the lead to create words.", "explain": "Describes the performance and implementation of the function of a thing." }, { "feature_name": "construction", "example": "A shirt is constructed by sewing.", "explain": "Details how the entity is constructed" }, { "feature_name": "owner", "example": "An airplane is owned by an airline.", "explain": "Describes the owner of the entity." }] }, { "type": "kind_type", "name": "VEHICLE", "parents": ["INDIVIDUAL", "ENTITY", "SELFMOVING", "NONSTATIONARY", "PHYSICAL", "REAL", "NONLIVING", "SOCIAL"], "instances": ["ground_vehicle", "air_vehicle", "automobile ", "ship"], "description": "A thing used for transporting people or goods.", "children": ["GROUND_VEHICLE", "AIR_VEHICLE"], "feature_types": [] }, { "type": "kind_type", "name": "GROUND_VEHICLE", "parents": ["VEHICLE", "INDIVIDUAL", "ENTITY", "SELFMOVING", "NONSTATIONARY", "PHYSICAL", "REAL", "NONLIVING", "SOCIAL"], "instances": ["bike", "car"], "description": "...", "children": [], "feature_types": [{ "feature_name": "movement_mechanism", "example": "A car moves by burning fuel using its combustion engine, which causes its wheels to turn.", "explain": "Describes the how the vehicle moves." }, { "feature_name": "driver", "example": "A car is driven by 1 driver.", "explain": "Describes the nature of the driver." }, { "feature_name": "crew", "example": "For every 50 passengers on an airplane there is 1 cabin crew allocated.", "explain": "Describes the crew of the vehicle." }, { "feature_name": "passengers", "example": "A car usually has space for 4 passengers.", "explain": "Describes the passengers of the vehicle." }] }, { "type": "kind_type", "name": "PLACE", "parents": ["INDIVIDUAL", "ENTITY", "NONLIVING", "PHYSICAL", "REAL", "STATIONARY"], "instances": [], "description": "...", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "ACT_OF_GOD_GROUP", "parents": ["COLLECTIVE", "ENTITY", "EVENT", "RELATIONAL", "TEMPORAL", "REAL", "NONMENTAL", "NATURAL"], "instances": ["monsoon"], "description": "An instance of uncontrollable natural forces in operation.", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "COGNITIVE_ACTIVITY", "parents": ["INDIVIDUAL", "ENTITY", "EVENT", "RELATIONAL", "TEMPORAL", "REAL", "MENTAL", "NATURAL"], "instances": ["thought"], "description": "Describes activity relating to, being, or involving conscious intellectual activity.", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "PROPOSITION", "parents": ["INDIVIDUAL", "ENTITY", "PROPOSITIONAL", "ABSTRACT"], "instances": ["sentence"], "description": "A a statement putting forth an idea, suggestion or plan.", "children": [], "feature_types": [{ "feature_name": "content", "example": "The sentence contains an argument calling for the death penalty to be legalized", "explain": "Describes the things that are held or included in something." }, { "feature_name": "author", "example": "This argument was put forth by John", "explain": "Describes the person who originated or gave existence to the entity described" }, { "feature_name": "haspart", "example": "", "explain": "Describes anything an entity has." }, { "feature_name": "goal", "example": "He presented his arguments with the goal of legalising euthanasia.", "explain": "Describes the intended outcome." }, { "feature_name": "function", "example": "", "explain": "Functions performed by the entity." }] }, { "type": "kind_type", "name": "NATURAL_STATE", "parents": ["INDIVIDUAL", "ENTITY", "STATE", "RELATIONAL", "TEMPORAL", "REAL", "MENTAL", "NATURAL"], "instances": ["heat"], "description": "...", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "transportation", "parents": ["SOCIAL_PROCESS", "INDIVIDUAL", "ENTITY", "GOAL", "EVENT", "RELATIONAL", "TEMPORAL", "REAL", "ACTIVITY", "NONMENTAL", "SOCIAL"], "instances": ["aviation_2"], "description": "Describe the means of moving humans, animals or goods from one location to another.", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "SOCIAL_PLACE", "parents": ["INDIVIDUAL", "ENTITY", "STATIONARY", "PHYSICAL", "REAL", "NONLIVING", "SOCIAL"], "instances": ["base_1", "building"], "description": "", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "IMAGINARY", "parents": ["INDIVIDUAL", "ENTITY", "IRREAL", "ABSTRACT"], "instances": ["unicorn"], "description": "Describes entities that are not real.", "children": [], "feature_types": [] }, { "type": "kind_type", "name": "FUEL", "parents": ["MANMADEOBJ", "INDIVIDUAL", "ENTITY", "NONSELFMOVING", "NONSTATIONARY", "PHYSICAL", "REAL", "NONLIVING", "SOCIAL"], "instances": ["cng", "gasoline", "petrol", "diesel"], "description": "A fuel is any material that can be made to react with other substances so that it releases energy as heat energy or to be used for work.", "children": [], "feature_types": [] }];
		var subKtTree = []; // this is the sub kt tree based on the selected root kt. Note: there is an additional attribute 'parentname' added for each kt in this tree.
		const root = "ENTITY";
		var stage = 0; // 0 - Welcome page; 1 - Select categories; 2 - Select kindtype; 3 - Submit data and end.
		const theInstance = setInstance();
		var selectedCategories = []; // names only

		// ***************************************************************************************
		// Define Functions
		// ***************************************************************************************

		function setInstance() {
			// Auto select an available instance for this task;
			$("input[name='SelectedInstance']").val("bird");
			return "bird"; // TODO: get from database
		}

		function isTerminal() {
			selectedCategories.sort();
			for (let i = 0; i < allKindTypes.length; i++) {
				let kt = allKindTypes[i];
				let parents = kt.parents.sort();
				if (arraysEqual(selectedCategories, parents)) {
					return kt.name;
				}
			}

			return null;
		}

		function arraysEqual(a, b) {
			if (a instanceof Array && b instanceof Array) {
				if (a.length != b.length)  // assert same length
					return false;
				for (var i = 0; i < a.length; i++)  // assert each element equal
					if (!arraysEqual(a[i], b[i]))
						return false;
				return true;
			} else {
				return a == b;  // if not both arrays, should be the same
			}
		}

		var featureNum = 1;
		function addFeatureValue(idstr) {
			$("#" + idstr).append('<input type="text" name="' + idstr + '_' + featureNum + '"><br>');
			++featureNum;
		}

		function stage_0() {
			stage = 0;
			$("#welcome_page").show();
		}

		function stage_1() {
			stage = 1;
			$("#welcome_page").hide();
			$("#instance_head").show();
			$("#the_instance").text(theInstance);
			$("#stage_1_head").show();

			// Add root
			selectedCategories.push(root);
			// Show the first set of questions (always start from Entity)
			$("div[id^='cat_childset_" + root + "_']").show();
		}

		function stage_1_1(ktName) {
			$("#stage_1_head").hide();
			let $showlist = $("div[id^='cat_childset_']:visible");
			$showlist.hide();

			let kt = getKtByName(ktName);
			$("#h_kt_name").text(ktName);
			$("#h_kt_desc").text(kt.description);
			$("#kt_halfway").show();

			$("input[name='h_kt_radio']").on("click", function (e) {
				if ($(this).is(':checked')) {
					let v = $(this).val();
					if (v === "yes") {
						$("#kt_halfway").hide();
						stage_2(ktName);
					} else {
						$("#kt_halfway").hide();
						$("#stage_1_head").show();
						$showlist.show();
					}
				}
			});
		}

		function stage_2(ktName) {
			// get root kt
			let rootkt = getKtByName(ktName);
			// get the sub kindtype treee based on the root ktName
			appendSubKts(rootkt, "");
			// console.log("subKtTree : " + JSON.stringify(subKtTree));

			// clear stage 1 displays and show stage 2 head
			$("#stage_1_head").hide();
			$("#stage_2_head").show();

			// generate table rows
			let tbodyStr = "";
			for (let i = 0; i < subKtTree.length; i++) {
				let kt = subKtTree[i];
				tbodyStr += '<tr data-tt-id="' + kt.name + '" data-tt-parent-id="' + kt.parentname + '">';
				tbodyStr += '<td nowrap><input type="radio" name="radio_ktname" value="' + kt.name + '">&nbsp;' + kt.name + '</td>';
				tbodyStr += '<td>' + kt.description + '</td>';
				tbodyStr += '<td>' + kt.instances.join(", ") + '</td></tr>';
			}

			$("#kt_table_body").html(tbodyStr);
			$("#kt_table").treetable({ expandable: true, force: true });
			$("#kt_selection").show();
			$("#kt_table").treetable("expandAll");

			$("#button1_to_stage3").on("click", function (e) {
				var radioValue = $("input[name='radio_ktname']:checked").val();
				if (radioValue) {
					if (radioValue === "NOMATCH") {
						$("#stage_2_head").hide();
						$("#kt_selection").hide();
						stage_2_1(true);
					} else {
						stage_3(1); // case 1: select existing kt
					}
				} else {
					toastr["warning"]("Please select a type from the table.").attr('style', 'width: 600px !important; background-image: none !important');
				}
			});
		}

		// No kindtype is found for the selected categories, ask user to suggest a new type
		function stage_2_1(getparent) {
			$("#stage_1_head").hide();
			$("#kt_suggest").show();

			if (getparent) {
				// Select parent type of the new type
				let tbodyStr = "";
				for (let i = 0; i < subKtTree.length; i++) {
					let kt = subKtTree[i];
					tbodyStr += '<tr data-tt-id="' + kt.name + '" data-tt-parent-id="' + kt.parentname + '">';
					tbodyStr += '<td nowrap><input type="radio" name="radio_parent_ktname" value="' + kt.name + '">&nbsp;' + kt.name + '</td>';
					tbodyStr += '<td>' + kt.description + '</td>';
					tbodyStr += '<td>' + kt.instances.join(", ") + '</td></tr>';
				}

				$("#parent_kt_table_body").html(tbodyStr);
				$("#parent_kt_table").treetable({ expandable: true, force: true });
				$("#parent_kt_question").show();
				$("#parent_kt_table").treetable("expandAll");

				$("#button2_to_stage3").on("click", function (e) {
					var textValue = $("input[name='suggested_kt']").val();
					if (textValue && $.trim(textValue) !== "") {
						var radioValue = $("input[name='radio_parent_ktname']:checked").val();
						if (radioValue) {
							stage_3(2); // case 2: new kt, with existing parents
						} else {
							toastr["warning"]("Please select a parent type.").attr('style', 'width: 600px !important; background-image: none !important');
						}
					} else {
						toastr["warning"]("Please enter suggested name of a new type.").attr('style', 'width: 600px !important; background-image: none !important');
						$("input[name='suggested_kt']").val("");
					}
				});
			} else {
				// No parent type to select from
				$("#button2_to_stage3").on("click", function (e) {
					var textValue = $("input[name='suggested_kt']").val();
					if (textValue && $.trim(textValue) !== "") {
						stage_3(3); // case 3: new kt, no parent
					} else {
						toastr["warning"]("Please enter suggested name of a new type.").attr('style', 'width: 600px !important; background-image: none !important');
						$("input[name='suggested_kt']").val("");
					}
				});
			}
		}

		function stage_3(x) {
			let kt = "";
			if (x > 1) {
				kt = $("input[name='suggested_kt']").val();
			} else {
				kt = $("input[name='radio_ktname']:checked").val();
			}
			let str = '<h4>Please Add Features for "' + kt + '"</h4>e.g. ......<br>';
			str += '<div id="ifeature_' + kt + '"></div>';
			str += '<a href="#" onclick="addFeatureValue(\'ifeature_' + kt + '\')">Add</a><br>';
			$("#feature_list_area").append(str);
			addFeatureValue('ifeature_' + kt);
			addFeatureValue('ifeature_' + kt);
			addFeatureValue('ifeature_' + kt);

			$("#button3_to_stage4").on("click", function (e) {
				$("#instance_head").hide();
				$("#feature_filling").hide();
				stage_4("");
			});

			$("#stage_2_head").hide();
			$("#kt_selection").hide();
			$("#kt_suggest").hide();
			$("#feature_filling").show();
		}

		// Not used: For 1st version do not show category features to complicate the task.
		function stage_3b(case_value) {
			let cat_feature_list = []; // e.g. [{"catname":"PHYSICAL", "features":[...]}, {"catname":"XYZ", "features":[...]}]
			// get all features of selected categories
			for (let i = 0; i < selectedCategories.length; i++) {
				let query = "#cat_" + selectedCategories[i] + "_features";
				let objstr = $(query).text();
				//console.log("features for : "+query+"; before parse : "+objstr);
				let features = JSON.parse(objstr);
				//console.log(features);
				cat_feature_list.push({ "catname": selectedCategories[i], "features": features });
			}

			// get all features of parents plus selected kindtypes
			let kt_feature_list = []; // e.g. [{"ktname":"ABC", "features":[...]}, {"ktname":"EFG", "features":[...]}]
			switch (case_value) {
				case 1: // get feature of selected kt and parents
					let ktname = $("input[name='radio_ktname']:checked").val();
					let kt = getKtFromSubTree(ktname);
					let parents = getParentKTs(kt.parentname);
					kt_feature_list.push({ "ktname": ktname, "features": kt.feature_types });
					for (let i = 0; i < parents.length; i++) {
						kt_feature_list.push({ "ktname": parents[i].name, "features": parents[i].feature_types });
					}
					break;
				case 2: // get feature of parents
					let parentname = $("input[name='radio_parent_ktname']:checked").val();
					if (parentname !== "NONE") {
						let parents2 = getParentKTs(parentname);
						for (let i = 0; i < parents2.length; i++) {
							kt_feature_list.push({ "ktname": parents2[i].name, "features": parents2[i].feature_types });
						}
					}
					break;
				case 3: // no feature
					break;
			}

			// generate feature filling form
			for (let i = 0; i < cat_feature_list.length; i++) {
				let cat = cat_feature_list[i].catname;
				let f = cat_feature_list[i].features;
				for (let j = 0; j < f.length; j++) {
					// console.log("f[j]= " + JSON.stringify(f[j]));
					if (f[j].feature_name) {
						let str = "<h4>Feature: " + f[j].feature_name + "<br>Explain: " + f[j].explain + "<br>Sample Value: " + f[j].example + "</h4>";
						str += 'Enter suitable value(s) for this instance:<br><div id="catfeature_' + cat + '_' + f[j].feature_name + '"></div>';
						str += '<a href="#" onclick="addFeatureValue(\'catfeature_' + cat + '_' + f[j].feature_name + '\')">Add</a><br>';
						$("#feature_list_area").append(str);
					}
				}
			}

			for (let i = 0; i < kt_feature_list.length; i++) {
				let kt = kt_feature_list[i].ktname;
				let f = kt_feature_list[i].features;
				for (let j = 0; j < f.length; j++) {
					let str = "<h4>Feature: " + f[j].feature_name + "</h4>Explain: " + f[j].explain + "<br>Sample Value: " + f[j].example + "<br>";
					str += 'Enter suitable value(s) for current instance:<br><div id="ktfeature_' + kt + '_' + f[j].feature_name + '"></div>';
					str += '<a href="#" onclick="addFeatureValue(\'ktfeature_' + kt + '_' + f[j].feature_name + '\')">Add</a><br>';
					$("#feature_list_area").append(str);
				}
			}

			$("#button3_to_stage4").on("click", function (e) {
				$("#instance_head").hide();
				$("#feature_filling").hide();
				stage_4("");
			});

			$("#stage_2_head").hide();
			$("#kt_selection").hide();
			$("#kt_suggest").hide();
			$("#feature_filling").show();

		}

		function stage_4(v) {
			$("div").hide();
			$("#last_box").show();
		}

		function appendSubKts(kt, parentname) {
			kt.parentname = parentname;
			subKtTree.push(kt);
			// now cascade to children
			for (let i = 0; i < kt.children.length; i++) {
				let childname = kt.children[i];
				appendSubKts(getKtByName(childname), kt.name);
			}
		}

		// Return kindtype object for the given name, return null if not found.
		function getKtByName(ktname) {
			for (let i = 0; i < allKindTypes.length; i++) {
				if (allKindTypes[i].name === ktname) {
					return allKindTypes[i];
				}
			}
			return null;
		}

		function getKtFromSubTree(ktname) {
			for (let i = 0; i < subKtTree.length; i++) {
				if (subKtTree[i].name === ktname) {
					return subKtTree[i];
				}
			}
			return null;
		}

		function getParentKTs(parentname) {
			let plist = [];
			while (parentname && parentname !== "") {
				let parent = getKtFromSubTree(parentname);
				plist.push(parent);
				parentname = parent.parentname;
			}
			return plist;
		}

		// functions for revert category
		function backTo(objname) {
			// locate the parent div of obj
			let p = $("span[id='cat_" + objname + "']").parent();
			$(p).show();
			$(p).children("input").prop("checked", false);

			// traverse all grand children
			resetCat(objname);

			updateSelectedDisplay();
		}

		// clear and hide categories recursivly, remove from selected array
		function resetCat(objname) {
			let i = selectedCategories.indexOf(objname);
			if (i >= 0) {
				selectedCategories.splice(i, 1);
			}
			let d = $("div[id^='cat_childset_" + objname + "_']");
			if ($(d).length > 0) {
				$(d).children("input").prop("checked", false);
				$(d).children("input").each(function () {
					let name = this.value.substring(4);
					resetCat(name);
				});
				$(d).hide();
			}
		}

		function updateSelectedDisplay() {
			$("#selected_cat_display").html("Selected Categories: " + selectedCategories.sort().join(", "));
		}

		// ***************************************************************************************
		// Code run after document load
		// ***************************************************************************************

		$(function () {

			// hide all category questions
			$("div[id^='cat_childset_']").hide();

			// link span click to show toastr notifications
			$("span.cat-option-text").on("click", function (e) {
				var dialogname = this.id + "_dialog";
				let description = $("#" + this.id + "_description").text();
				let examples = $("#" + this.id + "_examples").text();

				var infostr = "";
				infostr += "<br><strong>Description:</strong><br>" + description;
				infostr += "<br><br><strong>Sample Instances:</strong><br>" + examples;
				// show pop window layer
				toastr.remove();

				toastr.options = {
					'timeOut': 10000,
					'extendedTimeOut': 8000,
					'tapToDismiss': false,
					'closeButton': true,
					'positionClass': 'toast-top-center',
					"showMethod": "slideDown",
					"hideMethod": "slideUp"
				}

				toastr["info"](infostr, "Category: " + this.id.split("_")[1]).attr('style', 'width: 600px !important; background-image: none !important');
			});

			// when a category is selected
			$("input[name^='cat_radio_']").on("click", function (e) {
				// verify the radio button is selected
				if ($(this).is(':checked')) {
					let v = $(this).val();
					// validate the value is correct
					if (v.startsWith("cat_")) {
						let c = v.split("_")[1]; // category name
						// store selected value in selected array 
						selectedCategories.push(c);
						let chs = $("div[id^='cat_childset_" + c + "_']");
						if ($(chs).length > 0) {
							// display child categories if any
							$(chs).show();
							// only hide this category if there is children to show. This is to remain the option for user to change the category
							$("#" + this.name.replace("cat_radio_", "cat_childset_")).hide();
						}
						// check if current categories match any kindtype
						let kt = isTerminal();
						let shown = $("div[id^='cat_childset_']:visible").length;
						if (kt !== null) {
							// enter stage 2 for kindtypes
							updateSelectedDisplay();
							if (shown === 0) {
								stage_2(kt);
							} else {
								// This the the case where there are still more categories but already matched a kindtype e.g. 'PART'
								stage_1_1(kt);
							}
						} else {
							updateSelectedDisplay();
							if (shown === 0) {
								stage_2_1(false);
							}
						}
					} else if (v === "NO_CHOICE") {
						// User unable to choose a category, end all
						stage_4(v);
					}
				}
			});

			stage_0();
		});
	</script>
</body>

</html>